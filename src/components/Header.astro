---
const nav = [
  { href: "/about", label: "About", testid: "nav-about" },
  { href: "/projects", label: "Projects", testid: "nav-projects" },
  { href: "/timeline", label: "Career Timeline", testid: "nav-timeline" },
  { href: "/tech", label: "Tech", testid: "nav-tech" },
  { href: "/services", label: "Services", testid: "nav-services" },
  { href: "/contact", label: "Contact", testid: "nav-contact" },
]

const current = Astro.url.pathname

const linkBase =
  "transition-colors duration-base text-neutralTech-700 dark:text-neutralTech-200 hover:text-brand-wineMuted dark:hover:text-brand-beige"
---
<header 
  class="relative w-full bg-brand-surface dark:bg-brand-wine border-b border-neutralTech-200 dark:border-neutralTech-800 transition-colors duration-base"
  data-testid="header"
>
  <div class="max-w-container mx-auto px-4 py-4 flex items-center">
    <a 
      href="/" 
      class="text-h4 font-semibold text-brand-wine dark:text-brand-beige hover:text-brand-wineMuted dark:hover:text-neutralTech-200 transition-colors duration-base"
      data-testid="nav-home"
    >
      Luiza Gusm√£o
    </a>

    <div class="flex items-center gap-4 ml-auto">
      <nav aria-label="Main navigation" class="hidden md:block">
        <ul class="flex gap-6 text-body">
          {nav.map(item => {
            const isActive = current === item.href
            return (
              <li>
                <a 
                  href={item.href}
                  class={`${linkBase} ${isActive ? "font-semibold underline underline-offset-4" : ""}`}
                  data-testid={item.testid}
                >
                  {item.label}
                </a>
              </li>
            )
          })}
        </ul>
      </nav>

      <button 
        class="md:hidden cursor-pointer flex flex-col gap-1"
        onclick="toggleMobileMenu()"
        aria-label="Open menu"
      >
        <span class="w-6 h-0.5 bg-current"></span>
        <span class="w-6 h-0.5 bg-current"></span>
        <span class="w-6 h-0.5 bg-current"></span>
      </button>
    </div>
  </div>

  <ul 
    id="mobile-menu"
    class="hidden absolute top-full right-0 w-full px-4 py-4 flex-col gap-4 text-body bg-brand-surface dark:bg-brand-wine border-t border-neutralTech-200 dark:border-neutralTech-700 shadow-lg z-50 md:hidden"
  >
    {nav.map(item => {
      const isActive = current === item.href
      return (
        <li>
          <a 
            href={item.href}
            class={`${linkBase} ${isActive ? "font-semibold underline underline-offset-4" : ""}`}
            data-testid={item.testid + "-mobile"}
          >
            {item.label}
          </a>
        </li>
      )
    })}
  </ul>

  <script is:inline>
    function toggleMobileMenu() {
      const menu = document.getElementById("mobile-menu")
      menu.classList.toggle("hidden")
    }
  </script>
</header>
